!function(t,e){"use strict";function n(t,e){return y.toString.call(t).slice(8,-1)===e}function i(t,n,i,r){if(0===arguments.length)throw Error("Module: I need a agrument");E.isFunction(t)?(i=t,t=e,n=b):E.isArray(t)?(n=b,t=e):E.isFunction(n)&&(i=n,n=b),this.id=t?a(t)[2]:t,this.status="uninitialized",E.isString(n)&&(n=n.split(",")),this.dependencies=n,this.factory=i,this.root=r||U,this.undef=[],this.id&&(B[this.id]="uninitialized"),this.checkDependencies(n),this.define()}function r(t){return"THEO"===t.amd}function s(t){return"defined"===B[t]}function o(){this.status="unfulfilled",this.fulfilledHandlers=[],this.errorHandlers=[],this.reason=""}function u(t){return t instanceof o}function a(t,e){var n,i,r,s=t,o=U.alias;if(e=e||H.baseURL,e=e.substr(0,e.lastIndexOf("/")),r=t,w.test(t)&&o[t])s=o[t];else if(/^(\w+)(\d)?:.*/.test(t))s=t;else if(n=t.charAt(0),i=t.slice(0,2),"."!==n&&"/"!==n)s=e+"/"+t;else if("./"===i)r=t.substr(2),s=e+"/"+r;else if(".."===i){var u=e.split("/");n=t.replace(/\.\.\//g,function(){return u.pop(),""}),r=n,s=u.join("/")+"/"+n}var a="js";return n=s.replace(/[?#].*/,""),/\.(\w+)$/.test(n)&&(a=RegExp.$1),"css"===a||n!==s||A.test(s)||(s+=".js"),[s,a,r]}function f(t,e,n,i,r,s){if(E.isObject(t))return e=t.callback,n=t.attrs,i=t.timeout,r=t.fail,s=t.complete,t=t.src,f(t,e,n,i,r,s);var o=p.createElement("script"),u=!1;if(E.isObject(n))for(var l in n)o.setAttribute(l,n[l]);var d=a(t);return t=o.src=d[0].replace(/\/\/$/,"/"),o.async=!0,o.type="text/javascript",o.charset=H.charset,s=E.isFunction(s)?s:v,o.onload=o.onreadystatechange=function(n){n=n||y,u||"load"!==n.type&&!/loaded|complete|undefined/.test(o.readyState)||(u=!0,c(o),k[t]="loaded",E.isFunction(e)&&e(),s("load"))},o.onerror=function(){u=!0,k[t]="error",E.isFunction(r)&&r(),s("error")},i=E.isNumber(i)?i:H.timeout,i&&g(function(){u||(u=!0,k[t]="timeout",s("timeout"))},i),k[t]="pending",F.insertBefore(o,O),U}function c(t){t.onload=t.onerror=t.onreadystatechange=null,t.parentNode&&g(function(){t.parentNode.removeChild(t),t=null},0)}function l(t,e,n,i,r,s){if(E.isObject(t))return e=t.callback,n=t.attrs,i=t.timeout,r=t.fail,s=t.complete,t=t.href,l(t,e,n,i,r,s);var o=p.createElement("link"),u=!1;i=E.isNumber(i)?i:H.timeout;var f=a(t);if(t=o.href=f[0],o.rel="stylesheet",o.type="text/css",E.isObject(n))for(var c in n)o.setAttribute(c,n[c]);if(E.isFunction(e)){s=E.isFunction(s)?s:v;var d,h;d=function(){u||(u=!0,o.onload=o.onerror=o.onreadystatechange=null,k[t]="loaded",E.isFunction(e)&&e(),s("load"))},E.isFunction(r)&&(h=function(){u||(u=!0,o.onload=o.onerror=o.onreadystatechange=null,k[t]="error",r(),s("error"))}),T(o,d,h),i&&g(function(){u||(u=!0,k[t]="timeout",s("timeout"))},i)}return k[t]="pending",F.insertBefore(o,O),U}function d(t){for(var e in t)t.hasOwnProperty(e)&&t[e]&&(E.isArray(t[e])&&(t[e].length=0),E.isFunction(t[e].destroy)&&t[e].destroy(),delete t[e])}function h(t,e,n){var i,r=S.call(arguments),s=1;for(n=!E.isBoolean(n)||n;e=r[s++];)if(E.isArray(e))for(var o=0,u=e.length;u>o;o++)h(t,e[o],n);else for(i in e)!n&&i in t||(t[i]=e[i]);return t}var p=t.document,g=t.setTimeout,m=function(){var t=p.getElementsByTagName("script");return t[t.length-1]}(),v=function(){},y={},b=[],F=p.head||p.getElementsByTagName("head")[0]||p.documentElement,O=F.getElementsByTagName("base")[0]||null,S=b.slice,x=function(t){var e=t.hasAttribute?t.src:t.getAttribute("src",4);return e.substr(0,e.lastIndexOf("/"))+"/"}(m),A=/\.js$/i,j=/\.css$/i,w=/^[-\w\d_$]{2,}$/i,E={},H={timeout:2e4,baseURL:x,charset:"utf-8"},N={},k={},B={},$={};"Function,String,Array,Number".replace(/[^, ]+/g,function(t){E["is"+t]=function(e){return n(e,t)}}),E.isFunction=function(t){return"function"==typeof t},E.isObject=function(t){return"object"==typeof t},E.isBoolean=function(t){return!0===t||!1===t||n(t,"Boolean")},E.isUndefined=function(t){return t===e};var D=t.navigator.userAgent;i.prototype={constructor:i,define:function(){this.canDefine()?this.namespace():"pending"!==this.status&&(this.status="pending",this.id&&(B[this.id]=this.status),this.loadDeps())},namespace:function(){for(var e,n,i=E.isString(this.id)?this.id.split("/"):b,r=this.root;e=i.shift();)n=e,i.length&&(r=r[e]=r[e]||{});try{var s=E.isFunction(this.factory)&&this.factory.apply(t,this.getArgs());s&&(s.amd="THEO",r[n]=s,this.id&&(B[this.id]="defined"))}catch(t){throw this.id&&(B[this.id]="error"),Error("Module.namespace error:id=>"+this.id+";undef=>"+this.undef.join(",")+";info=>"+t.message)}this.id&&E.isArray($[this.id])&&U.each($[this.id],function(t){u(t)&&t.resolve()}),this.destroy()},getFn:function(t){t=t.split("/");for(var e,n=this.root;e=t.shift();)n=n[e];return n},getArgs:function(){for(var t,e=this.dependencies,n=[this.root],i=0,r=e.length;r>i;i++)t=e[i],n.push(this.getFn(t));return n},canDefine:function(){for(var t,e=this.undef,n=e.length;n--;)if(t=e[n],!s(t)){if((j.test(t)||A.test(t))&&U.loaded(t))continue;return!1}return!0},loadDeps:function(){var t,e=this,n=e.undef;U.each(n,function(n){if(t=new o,$[n]=$[n]?$[n]:[],$[n].push(t.done(function(){e.define()})),"pending"!==B[n]){var i=U.alias(n);if(i&&i.length){var r=new o;r.done(function(){e.define()});var s=i.length,u=function(){0===--s&&(B[n]="defined",r.resolve())};U.each(i,function(t){if(j.test(t))U.loadCSS(t,u);else if(A.test(t))U.loadJS(t,u);else{var e=new o;$[t]=$[t]?$[t]:[],$[t].push(e.done(u)),U.loadJS(t)}})}else j.test(n)?U.loadCSS(n,function(){e.define()}):A.test(n)?U.loadJS(n,function(){e.define()}):U.loadJS(n)}})},checkDependencies:function(t){var e=this;U.each(t,function(t){t=a(t)[2],s(t)||e.undef.push(t)})},destroy:function(){d(this)}},o.prototype={constructor:o,reject:function(t){return"unfulfilled"!==this.status?this:(this.reason=t,this.status="failed",this.fire(this.errorHandlers,t))},isResolved:function(){return"fulfilled"===this.status},resolve:function(t){return"unfulfilled"!==this.status?this:(this.reason=t,this.status="fulfilled",this.fire(this.fulfilledHandlers,t))},fail:function(t){return this.then(e,t)},always:function(t){return this.then(t,t)},then:function(t,e){switch(this.status){case"unfulfilled":this.add(t,"fulfilled").add(e,"error");break;case"fulfilled":this.fire(t,this.reason);break;case"failed":this.fire(e,this.reason)}return this},done:function(t){return this.then(t)},fire:function(t,e){if(E.isArray(t)){for(var n;n=t.shift();)E.isFunction(n)&&n(e);this.clear()}else E.isFunction(t)&&t(e);return this},add:function(t,e){return e+="Handlers",E.isFunction(t)&&this[e]&&this[e].push(t),this},clear:function(){this.fulfilledHandlers.length=0,this.errorHandlers.length=0}};var J=536>Number(D.replace(/.*AppleWebKit\/(\d+)\..*/,"$1")),M=~D.indexOf("Firefox")&&!("onload"in p.createElement("link")),T=J||M?function(t,e){if(E.isFunction(e)){var n=new Image;n.src=t.href,n.error=e}}:function(t,e,n){E.isFunction(e)&&(t.onload=function(){e()}),E.isFunction(n)&&(t.onerror=function(){n()})},U={version:"MixJS 0.3 butterfly",mix:h,indexOf:function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n&&(i=0>n?Math.max(0,r+n):n),b.indexOf&&t.indexOf===b.indexOf)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},each:b.forEach?function(t,e,n){b.forEach.call(t,e,n)}:function(t,e,n){for(var i=0,r=t.length;r>i;i++)i in t&&e.call(n,t[i],i,t)},defined:s,define:function(t,e,n){return new i(t,e,n),this},use:function(t,n){return new i(e,t,n),this},config:function(t){return E.isObject(t)?(h(H,t),this):H},loaded:function(t){return t=a(t)[0],"loaded"===U.status(t)},status:function(t){return k[t]},alias:function(t,e){if(w.test(t)){if(E.isUndefined(e))return N[t];N[t]=(e+"").split(",")}else E.isObject(t)&&(e=t.path,t=t,U.alias(t,e))},loadJS:f,loadCSS:l,Promise:o,isAMD:r};E.isUndefined(t.define)&&(t.define=U.define),t.MixJS=h(U,E)}(this);